"use strict";!function($){$(document).ready((function(){let id_song,Song,volume=1,songs=songe;function playNewSong(id){let curtime,cur=-100;$(".audio .nameSong_name").text(songs[id][1]),$("title").text(songs[id][1]),$(".play").attr("id",id),id_song=id,Song=new Audio(songs[id][2]),$(".play").css({background:"url(img/icons/player/pause.png) no-repeat center top/cover"}),$(".song#"+id+" .play-pause_song").css({background:"url(img/icons/player/pausebutton.png) no-repeat center top/cover"}),$(".albumcover").attr("src",songs[id][4]),$(".muzlog").attr("src",songs[id][4]),Song.play(),Song.volume=volume,Song.addEventListener("timeupdate",()=>{curtime=Song.currentTime,cur=-100*(songs[id_song][3]-curtime)/songs[id_song][3],$(".time_play").text(parseInt(curtime/60)+":"+parseInt(curtime%60)),$(".progress").css({left:cur+"%"})}),Song.addEventListener("progress",()=>{try{let load=Song.buffered.end(0);load=-100*(songs[id_song][3]-load)/songs[id_song][3],$(".load").css({left:load+"%"})}catch(err){console.log("the provided index (0) is greater than or equal to the maximum border, everything is fine")}}),afterPlay(),Song.addEventListener("ended",()=>(Song=new Audio(songs[id++][2]),localStorage.setItem("song",JSON.stringify(songs[id])),localStorage.setItem("songs",JSON.stringify(songs)),$(".play").css({background:"url(img/icons/player/pause.png) no-repeat center top/cover"}),$(".song#"+id+" .play-pause_song").css({background:"url(img/icons/player/pausebutton.png) no-repeat center top/cover"}),-1!=id&&$(".play-pause_song").css({background:"url(img/icons/player/playbutton.png) no-repeat center top/cover"}),playNewSong(id)))}function playPauseSong(id){if(!Song)return playNewSong(id);id==id_song?Song.paused?(Song.play(),Song.volume=volume,$(".play").css({background:"url(img/icons/player/pause.png) no-repeat center top/cover"}),$(".song#"+id+" .play-pause_song").css({background:"url(img/icons/player/pausebutton.png) no-repeat center top/cover"})):(Song.pause(),$(".play").css({background:"url(img/icons/player/play.png) no-repeat center top/cover"}),$(".song#"+id+" .song").css({background:"url(img/icons/player/playbutton.png) no-repeat center top/cover"})):(Song.pause(),$(".play-pause_song").css({background:"url(img/icons/player/playbutton.png) no-repeat center top/cover"}),$(".song#"+id+" .play-pause_song").css({background:"url(img/icons/player/pausebutton.png) no-repeat center top/cover"}),playNewSong(id))}function retrySong(){0==Song.loop?Song.loop=!0:(Song.loop=!1,$(".repeat").css({background:"url(../img/icons/player/repeat.png) no-repeat center top/cover"}))}function afterPlay(){"/questions_questions_questions_questions.html"===location.pathname&&songs[id_song][0]>35?playNewSong(!1):"/level_up_part_one.html"===location.pathname&&songs[id_song][0]>2?playNewSong(!1):"/allworld.html"===location.pathname&&songs[id_song][0]>15?playNewSong(!1):"/early-morning-and-euphoria.html"===location.pathname&&songs[id_song][0]>44&&playNewSong(!1)}$(".repeat").on("click",(function(){let id=$(this).attr("data-id");-1==id&&($(".repeat").css({background:"url(../img/icons/player/repeat_one.png) no-repeat center top/cover"}),retrySong(id))})),$("body").on("click",".song, .play",(function(event){let id=$(this).attr("id");localStorage.setItem("song",JSON.stringify(songs[id])),localStorage.setItem("songs",JSON.stringify(songs)),$(".play-pause_song").css({background:"url(img/icons/player/playbutton.png)no-repeat center top/cover"}),playPauseSong(id),id++,$(".nextbtn#next").attr("data-id",id),id--,id--,$(".prevbtn#prev").attr("data-id",id)})),$(".nextbtn").on("click",(function(){let id=$(this).attr("data-id");localStorage.setItem("song",JSON.stringify(songs[id])),localStorage.setItem("songs",JSON.stringify(songs)),-1!=id&&($(".play-pause_song").css({background:"url(img/icons/player/playbutton.png) no-repeat center top/cover"}),playPauseSong(id),id++,$(".nextbtn#next").attr("data-id",id),id--,id--,$(".prevbtn#prev").attr("data-id",id),afterPlay())})),$(".prevbtn").on("click",(function(){let id=$(this).attr("data-id");-1!=id&&($(".play-pause_song").css({background:"url(img/icons/player/playbutton.png) no-repeat center top/cover"}),playPauseSong(id),id++,$(".nextbtn#next").attr("data-id",id),id--,id--,$(".prevbtn#prev").attr("data-id",id),afterPlay())})),$("#myRange").on("change",(function(){let val=$(this).val();Song&&(volume=val/100,Song.volume=volume)})),$(".range").on("mouseenter",(function(){if(Song){let id=$(".play").attr("id"),offset=$(this).offset(),dur=songs[id][3],w=$(this).width();$(".setTime").show(),$(".range").on("mousemove",(function(e){let x=e.pageX-offset.left,xproc=100*x/w,sec=xproc*dur/100;$(".setTime").css({left:x-40}),$(".setTime").text(parseInt(sec/60)+":"+parseInt(sec%60)),$(".range").on("click",(function(){xproc-=100,$(".progress").css({left:xproc+"%"}),Song.currentTime=sec}))})),$(".range").on("mouseout",(function(){$(".setTime").hide()}))}})),window.addEventListener("storage",(function(){Song.pause(),$(".play").css({background:"url(img/icons/player/play.png) no-repeat center top/cover"}),$(".play-pause_song").css({background:"url(img/icons/player/playbutton.png) no-repeat center top/cover"}),console.log("Песня на паузе")}))}))}(jQuery);